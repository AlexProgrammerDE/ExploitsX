package me.bait.exploitsx.exploits;

import org.bukkit.Location;
import org.bukkit.Material;
import org.bukkit.World;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.BlockDispenseEvent;
import org.bukkit.event.player.PlayerBucketEmptyEvent;

//-- // WARNING \\ --
// Licence publique Creative Commons Attribution - Utilisation non commerciale - Pas d’Œuvre dérivée 4.0 International
//        Lorsque Vous exercez les Droits accordés par la licence (définis ci-dessous), Vous acceptez d'être lié par les termes et conditions de la présente Licence publique Creative Commons Attribution - Utilisation non commerciale - Pas d’Œuvre dérivée 4.0 International (la « Licence publique »). Dans la mesure où la présente Licence publique peut être interprétée comme un contrat, Vous bénéficiez des Droits accordés par la licence en contrepartie de Votre acceptation des présents termes et conditions, et le Donneur de licence Vous accorde ces droits en contrepartie des avantages que lui procure le fait de mettre à disposition l’Œuvre sous licence en vertu des présents termes et conditions.
//-- https://creativecommons.org/licenses/by-nc-nd/4.0/deed.fr
//-- ExploitsX Sebastian Giheta 2019-2020
//-- //         \\ --

public class PortalBreaker implements Listener {

	/*
	 * Suck my cock and balls, Sev, Mason, Leee and all you other fucking clowns. <3
	 * Your code is shit and you like to break copyright laws. Mad at me for using
	 * code like API.clearMemFiles() function that you fucking gave to me through
	 * DMs? Okay, I'll change it all. Never liked it anyways. You guys think doxxing
	 * teenagers and ruining their fucking lives because they rightfully took what
	 * they owned away from you (6b6t.org) is appropriate? I make plugins to make
	 * the community better. Not to ruin people's servers, to make them better.
	 * Fuckall outta here.
	 */

	String epo = "ENDER_PORTAL";

	@EventHandler
	public void onBucket(PlayerBucketEmptyEvent event) {
		Location blc = event.getBlockClicked().getLocation();
		World world = blc.getWorld();
		int x = blc.getBlockX();
		int z = blc.getBlockZ();
		int y = blc.getBlockY();
		int yNeg = y - 1;
		int yPos = y + 1;
		int xNeg = x - 1;
		int zNeg = z - 1;
		int xPos = x + 1;
		int zPos = z + 1;
		if (event.getBlockClicked().getType() == Material.ENDER_PORTAL_FRAME
				|| world.getBlockAt(x, yNeg, z).getType().toString().equals(epo)
				|| world.getBlockAt(x, yPos, z).getType().toString().equals(epo)
				|| world.getBlockAt(x, y, zNeg).getType().toString().equals(epo)
				|| world.getBlockAt(xNeg, y, z).getType().toString().equals(epo)
				|| world.getBlockAt(x, y, zPos).getType().toString().equals(epo)
				|| world.getBlockAt(xPos, y, z).getType().toString().equals(epo)) {
			event.setCancelled(true);
		}
	}

	@EventHandler
	public void onDispense(BlockDispenseEvent event) {
		Location loc = event.getBlock().getLocation();
		World world = loc.getWorld();
		int x = loc.getBlockX();
		int z = loc.getBlockZ();
		int y = loc.getBlockY();
		int yNeg = y - 1;
		int yPos = y + 1;
		int xNeg = x - 1;
		int zNeg = z - 1;
		int xPos = x + 1;
		int zPos = z + 1;
		if (event.getBlock().getType() == Material.ENDER_PORTAL_FRAME
				|| world.getBlockAt(x, yNeg, z).getType().toString().equals(epo)
				|| world.getBlockAt(x, yPos, z).getType().toString().equals(epo)
				|| world.getBlockAt(x, y, zNeg).getType().toString().equals(epo)
				|| world.getBlockAt(xNeg, y, z).getType().toString().equals(epo)
				|| world.getBlockAt(x, y, zPos).getType().toString().equals(epo)
				|| world.getBlockAt(xPos, y, z).getType().toString().equals(epo)) {
			event.setCancelled(true);
		}
	}
}
